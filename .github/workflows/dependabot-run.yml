name: Run Dependabot Manually

on:
  workflow_dispatch: # Allows manual run from GitHub UI
  schedule:
    - cron: "0 6 * * 5" # Fridays at 06:00 UTC

jobs:
  dependabot:
    name: Run Dependabot
    runs-on: ubuntu-22.04

    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Run Dependabot Core
        uses: github/dependabot-action@v2
        env:
          DEPENDABOT_DISABLE_CLEANUP: 1
          DEPENDABOT_ENABLE_CONNECTIVITY_CHECK: 0
          # Use custom secret name because "github" is reserved as a secret prefix in some envs; fallback to PAT secret, then default GitHub token.
          GITHUB_TOKEN: ${{ secrets.GIT_HUB_TOKEN || secrets.PERSONAL_ACCESS_TOKEN_GITHUB || github.token }}
